import logging
import asyncio
from aiogram import Bot, Dispatcher, types
from aiogram.types import (
    ReplyKeyboardMarkup, KeyboardButton, 
    InlineKeyboardMarkup, InlineKeyboardButton, WebAppInfo, InputFile
)
from aiogram.filters import CommandStart

# ‚ö†Ô∏è –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–≤–æ–π —Ç–æ–∫–µ–Ω, –Ω–æ –Ω–µ –ø—É–±–ª–∏–∫—É–π –µ–≥–æ –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –º–µ—Å—Ç–∞—Ö!
TOKEN = "7494203016:AAEopdG_EB-t35SbkfGqYjp9fgXXay7jPHM"

# URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ—é —Å—Å—ã–ª–∫—É)
IMAGE_URL = "https://i.postimg.cc/CLhRSDJp/photo-2025-02-11-20-49-13.jpg"  # <-- –£–∫–∞–∂–∏ —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token=TOKEN)
dp = Dispatcher()

# –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ —Å WebApp-–∫–Ω–æ–ø–∫–∞–º–∏, –∏—Ö –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
services = {
    "üöó –û–°–ê–ì–û": {
        "url": "https://golnk.ru/xl0dw",
        "description": "–û—Ü–µ–Ω–∏—Ç–µ, —Å—Ä–∞–≤–Ω–∏—Ç–µ –∏ –æ—Ñ–æ—Ä–º–∏—Ç–µ –ø–æ–ª–∏—Å –û–°–ê–ì–û –æ—Ç 16+ –Ω–∞–¥–µ–∂–Ω—ã—Ö —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π ‚Äî –±—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ –∏ –Ω–∞ –ª—É—á—à–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö!",
        "button_text": "‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏–¥–∂–µ—Ç"
    },
    "üöô –ö–ê–°–ö–û": {
        "url": "https://golnk.ru/lpZ34",
        "description": "–ó–∞—â–∏—Ç–∏—Ç–µ —Å–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å –∏ —Å–≤–æ–∏ –Ω–µ—Ä–≤—ã ‚Äî –æ—Ñ–æ—Ä–º–∏—Ç–µ –ö–ê–°–ö–û –Ω–∞ –ª—É—á—à–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö! –ë—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ –∏ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≤—ã–≥–æ–¥–æ–π!",
        "button_text": "‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏–¥–∂–µ—Ç"
    },
    "üè† –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –∏–ø–æ—Ç–µ–∫–∏": {
        "url": "https://golnk.ru/Wgb82",
        "description": "–°—Ä–∞–≤–Ω–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–ª–∏—Å–∞ –∏–ø–æ—Ç–µ—á–Ω–æ–≥–æ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –≤ –≤–µ–¥—É—â–∏—Ö –∫–æ–º–ø–∞–Ω–∏—è—Ö –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –≤–∞—à–µ–≥–æ –±–∞–Ω–∫–∞. –≠–∫–æ–Ω–æ–º—å—Ç–µ –≤—Ä–µ–º—è –∏ –¥–µ–Ω—å–≥–∏, –ø–æ–ª—É—á–∞—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –≤ –æ–¥–∏–Ω –∫–ª–∏–∫!",
        "button_text": "‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏–¥–∂–µ—Ç"
    },
    "üè¶ –ü—Ä–æ—á–∏–µ —É—Å–ª—É–≥–∏": {
        "url": "https://golnk.ru/qJdQb",
        "description": "–ú—ã –ø–æ–¥–±–µ—Ä–µ–º –ª—É—á—à–∏–µ —É—Å–ª—É–≥–∏ —Å —É—á–µ—Ç–æ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±—Ä–∞—Ç—å —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã.",
        "button_text": "‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏–¥–∂–µ—Ç"
    },
    "üèù –≠–∫—Å–∫—É—Ä—Å–∏–∏üèù": {
        "url": "https://golnk.ru/QabvB",
        "description": "–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Ç—ã—Å—è—á–∏ –≥–∏–¥–æ–≤ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –æ–ø—ã—Ç–æ–º –∏ –≥–ª—É–±–æ–∫–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏. –°—Ä–µ–¥–∏ –Ω–∏—Ö –∂—É—Ä–Ω–∞–ª–∏—Å—Ç—ã, –∏—Å—Ç–æ—Ä–∏–∫–∏, –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä—ã –∏ –¥—Ä—É–≥–∏–µ —É–≤–ª–µ—á–µ–Ω–Ω—ã–µ –ª—é–¥–∏, —Å–ø–æ—Å–æ–±–Ω—ã–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–µ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ —Å–≤–æ–∏—Ö –≥–æ—Ä–æ–¥–∞—Ö –∏ —Å—Ç—Ä–∞–Ω–∞—Ö.",
        "button_text": "üó£–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"
    },
}

# –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏ (2 –≤ —Ä—è–¥)
buttons = [KeyboardButton(text=service) for service in services.keys()]
keyboard_layout = [buttons[i:i+2] for i in range(0, len(buttons), 2)]  
main_menu = ReplyKeyboardMarkup(keyboard=keyboard_layout, resize_keyboard=True)

@dp.message(CommandStart())
async def start(message: types.Message):
    user_name = message.from_user.first_name
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞
    if IMAGE_URL:
        await message.answer_photo(
            photo=IMAGE_URL,
            caption=f"üëã –ü—Ä–∏–≤–µ—Ç, {user_name}! –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤–∞–º —É–º–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å—Ñ–µ—Ä –∂–∏–∑–Ω–∏, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –≤—Ä–µ–º—è –∏ –¥–µ–Ω—å–≥–∏! –û—Ñ–æ—Ä–º–ª—è–π—Ç–µ –≤—Å—ë –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ ‚Äî –±—ã—Å—Ç—Ä–æ, –≤—ã–≥–æ–¥–Ω–æ –∏ –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç. –ü–æ–ª—É—á–∏—Ç–µ –ª—É—á—à–∏–µ —É—Å–ª–æ–≤–∏—è –±–µ–∑ –ª–∏—à–Ω–∏—Ö —É—Å–∏–ª–∏–π!",
            reply_markup=main_menu
        )
    else:
        await message.answer(
            f"üëã –ü—Ä–∏–≤–µ—Ç, {user_name}! –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤–∞–º —É–º–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å—Ñ–µ—Ä –∂–∏–∑–Ω–∏, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –≤—Ä–µ–º—è –∏ –¥–µ–Ω—å–≥–∏! –û—Ñ–æ—Ä–º–ª—è–π—Ç–µ –≤—Å—ë –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ ‚Äî –±—ã—Å—Ç—Ä–æ, –≤—ã–≥–æ–¥–Ω–æ –∏ –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç. –ü–æ–ª—É—á–∏—Ç–µ –ª—É—á—à–∏–µ —É—Å–ª–æ–≤–∏—è –±–µ–∑ –ª–∏—à–Ω–∏—Ö —É—Å–∏–ª–∏–π!",
            reply_markup=main_menu
        )

@dp.message()
async def service_handler(message: types.Message):
    service_name = message.text
    if service_name in services:
        service_info = services[service_name]
        
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –µ–≥–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        button_text = service_info.get("button_text", f"üîó –ü–µ—Ä–µ–π—Ç–∏ –∫ {service_name}")

        # –°–æ–∑–¥–∞–Ω–∏–µ WebApp-–∫–Ω–æ–ø–∫–∏ —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º
        webapp_markup = InlineKeyboardMarkup(
            inline_keyboard=[[InlineKeyboardButton(
                text=button_text,
                web_app=WebAppInfo(url=service_info["url"])
            )]]
        )

        await message.answer(f"üìå {service_name}\n\n{service_info['description']}", reply_markup=webapp_markup)
    else:
        await message.answer("‚ùå –¢–∞–∫–æ–π —É—Å–ª—É–≥–∏ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ. –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ –º–µ–Ω—é.")

async def on_startup():
    logging.info("‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!")

async def main():
    logging.basicConfig(level=logging.INFO)
    dp.startup.register(on_startup)
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())
